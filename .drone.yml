kind: pipeline
name: Drone

steps:
 - name: compile
   image: starlight2834/ci_docker:latest
   environment:
     token:
       from_secret: token
     chat_id:
       from_secret: chat_id
   commands:
      - apt-get -y update && apt-get -y upgrade && apt-get -y install bc build-essential zip curl libstdc++6 git wget python gcc clang libssl-dev repo rsync flex bison cpio
      - git config --global user.name "Catinice"
      - git config --global user.email "premdevgan9@gmail.com"
      - git config --global color.ui false
      - git clone https://github.com/akhilnarang/scripts && cd scripts && bash setup/android_build_env.sh && cd ..
      - mkdir d && cd d
      - wget https://raw.githubusercontent.com/Catinice/kernel_xiaomi_sm6150/rmiui/build.sh
      - bash build.sh
     
